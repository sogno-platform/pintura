{{#each Diagram as |value diagramId|}}
  <g id="{{@diagramId}}" name="{{pintura:name}}">
  {{#with components}}
  {{#each this as |value typeName|}}
    <g class={{typeName}} >
    {{#each this as |value componentId|}}
      <g
        id="{{pintura:rdfId}}"
        name="{{pintura:label.text}}"
        type="{{typeName}}"
        class="image"
        diagram-id="{{@diagramId}}">
      {{#each pintura:points}}
        <g>
          <svg
            diagramObjectPointId="{{diagramObjectPointId}}"
            x="{{x}}"
            y="{{y}}"
            id="{{componentId}}-img{{{fourdigits @key}}}"
            height="{{imageHeight}}"
            width="{{imageWidth}}"
            transform="{{../pintura:transform}}"
            viewBox="0 0 24 24"
            imageIndex="1"
          >
            {{{../pintura:image}}}
          </svg>
        </g>
      {{/each}}
      {{#each pintura:line}}
        <line
          x1="{{x1}}"
          y1="{{y1}}"
          x2="{{x2}}"
          y2="{{y2}}"
          id="{{componentId}}-bar{{{fourdigits @index}}}"
          class="line fillwhenstill"
        />
      {{/each}}
      </g>
    {{/each}}
    </g>
  {{/each}}
  {{/with}}
  {{#with components}}
  {{#each this as |value typeName|}}
    <g class={{typeName}}-label >
    {{#each this as |value componentId|}}
      <g
        id="{{pintura:rdfId}}-label"
        name="{{pintura:label.text}}"
        >
      {{#pintura:label}}
	<rect class="svglabel-bg" id="{{componentId}}-bg0" rx="3" ry="3" />
        <text
          x="{{x}}"
          y="{{y}}"
          class="svglabel"
          type="{{typeName}}"
          id="{{componentId}}-txt0"
        >{{text}}</text>
      {{/pintura:label}}
      </g>
    {{/each}}
    </g>
  {{/each}}
  {{/with}}
  </g>
{{/each}}

